{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport firebase from \"./firebase\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CameraScreen() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    cameraRef = _useState2[0],\n    setCameraRef = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    picture1 = _useState4[0],\n    setPicture1 = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    picture2 = _useState6[0],\n    setPicture2 = _useState6[1];\n  var takePicture = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        var photo = yield cameraRef.takePictureAsync({\n          quality: 0.10,\n          width: 371,\n          height: 595\n        });\n        var image = yield ImageManipulator.manipulateAsync(photo.uri, [{\n          resize: {\n            width: 371\n          }\n        }], {\n          compress: 0.10\n        });\n        if (!picture1) {\n          setPicture1(image.uri);\n        } else if (!picture2) {\n          setPicture2(image.uri);\n        }\n      }\n    });\n    return function takePicture() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var savePictures = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var nombreArchivo = uuidv4();\n      var extension = picture1.split('.').pop();\n      var file = yield fetch(picture1);\n      var blob = yield file.blob();\n      var file2 = yield fetch(picture2);\n      var blob2 = yield file2.blob();\n      var storageRef = firebase.storage.ref();\n      var archivoPath = storageRef.child(\"pictures/picture1-\" + nombreArchivo + \".\" + extension);\n      yield archivoPath.put(blob, {\n        contentType: \"image/\" + extension\n      });\n      ;\n      var enlaceUrl = yield archivoPath.getDownloadURL();\n      var archivoPath2 = storageRef.child(\"pictures/picture2-\" + nombreArchivo + \".\" + extension);\n      yield archivoPath2.put(blob2, {\n        contentType: \"image/\" + extension\n      });\n      ;\n      var enlaceUrl2 = yield archivoPath.getDownloadURL();\n      var agregarDatos = function () {\n        var _ref3 = _asyncToGenerator(function* () {\n          try {\n            yield firebase.db.collection('datos').add({\n              nombre: 'Juan',\n              edad: 25,\n              email: 'juan@example.com',\n              foto1: enlaceUrl,\n              foto2: enlaceUrl2\n            });\n            console.log('Datos agregados correctamente');\n          } catch (error) {\n            console.error('Error al agregar datos:', error);\n          }\n        });\n        return function agregarDatos() {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n      agregarDatos();\n      setPicture1(null);\n      setPicture2(null);\n    });\n    return function savePictures() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var cancelar = function cancelar() {\n    setPicture1(null);\n    setPicture2(null);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Camera, {\n      style: styles.camera,\n      type: Camera.Constants.Type.back,\n      ref: function ref(_ref4) {\n        return setCameraRef(_ref4);\n      },\n      children: _jsx(View, {\n        style: styles.rectangle\n      })\n    }), _jsxs(View, {\n      style: styles.buttonsContainer,\n      children: [_jsx(Button, {\n        title: \"Tomar foto 1\",\n        onPress: takePicture\n      }), _jsx(Button, {\n        title: \"Tomar foto 2\",\n        onPress: takePicture\n      }), _jsx(Button, {\n        title: \"Guardar\",\n        onPress: savePictures,\n        disabled: !picture1 || !picture2\n      }), _jsx(Button, {\n        title: \"x\",\n        onPress: cancelar,\n        disabled: !picture1\n      })]\n    }), _jsxs(View, {\n      style: styles.previewContainer,\n      children: [picture1 && _jsx(Image, {\n        source: {\n          uri: picture1\n        },\n        style: styles.preview\n      }), picture2 && _jsx(Image, {\n        source: {\n          uri: picture2\n        },\n        style: styles.preview\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  camera: {\n    flex: 1,\n    width: '100%'\n  },\n  buttonsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-evenly',\n    paddingVertical: 20,\n    width: '100%'\n  },\n  previewContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-evenly',\n    paddingVertical: 20,\n    width: '100%',\n    height: '20%'\n  },\n  preview: {\n    width: 150,\n    height: 150\n  },\n  rectangle: {\n    position: 'absolute',\n    top: '5%',\n    left: '10%',\n    width: 331,\n    height: 510,\n    borderWidth: 2,\n    borderColor: 'white',\n    borderRadius: 20\n  }\n});","map":{"version":3,"names":["React","useState","StyleSheet","Text","View","Button","Image","Camera","ImageManipulator","firebase","v4","uuidv4","jsx","_jsx","jsxs","_jsxs","CameraScreen","_useState","_useState2","_slicedToArray","cameraRef","setCameraRef","_useState3","_useState4","picture1","setPicture1","_useState5","_useState6","picture2","setPicture2","takePicture","_ref","_asyncToGenerator","photo","takePictureAsync","quality","width","height","image","manipulateAsync","uri","resize","compress","apply","arguments","savePictures","_ref2","nombreArchivo","extension","split","pop","file","fetch","blob","file2","blob2","storageRef","storage","ref","archivoPath","child","put","contentType","enlaceUrl","getDownloadURL","archivoPath2","enlaceUrl2","agregarDatos","_ref3","db","collection","add","nombre","edad","email","foto1","foto2","console","log","error","cancelar","style","styles","container","children","camera","type","Constants","Type","back","rectangle","buttonsContainer","title","onPress","disabled","previewContainer","source","preview","create","flex","backgroundColor","alignItems","justifyContent","flexDirection","paddingVertical","position","top","left","borderWidth","borderColor","borderRadius"],"sources":["C:/Users/Emmanuel/Desktop/consultas/CameraScreen.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { StyleSheet, Text, View, Button, Image } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport * as ImageManipulator from 'expo-image-manipulator';\r\nimport firebase from \"./firebase\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\n\r\n\r\nexport default function CameraScreen() {\r\n\r\n  const [cameraRef, setCameraRef] = useState(null);\r\n  const [picture1, setPicture1] = useState(null);\r\n  const [picture2, setPicture2] = useState(null);\r\n\r\n  //sacar foto\r\nconst takePicture = async () => {\r\n  if (cameraRef) {\r\n    const photo = await cameraRef.takePictureAsync({\r\n      quality: 0.10,\r\n      width: 371,\r\n    height: 595\r\n    });\r\n\r\n\r\n\r\n//comprimir \r\nconst image = await ImageManipulator.manipulateAsync(\r\n  photo.uri,\r\n      [{ resize: { width: 371 } }], // Redimensionar la imagen a un ancho máximo de 800 píxeles\r\n      { compress: 0.10 } // Ajustar la calidad al 2%// Ajustar la calidad al 2%\r\n    );\r\n\r\n\r\n    if (!picture1) {\r\n     \r\n      setPicture1(image.uri);\r\n      \r\n    } else if (!picture2) {\r\n      setPicture2(image.uri);\r\n      //console.log(image.uri)\r\n    }\r\n  }\r\n\r\n\r\n};\r\n\r\n\r\nconst savePictures = async () => {\r\n //const db = firebase.firestore();\r\nconst nombreArchivo = uuidv4();\r\nconst extension = picture1.split('.').pop();\r\nconst file = await fetch(picture1);\r\nconst blob = await file.blob();\r\n\r\nconst file2 = await fetch(picture2);\r\nconst blob2 = await file2.blob();\r\n\r\nconst storageRef = firebase.storage.ref();\r\n    const archivoPath = storageRef.child(`pictures/picture1-${nombreArchivo}.${extension}`);\r\n    await archivoPath.put(blob, { contentType: `image/${extension}` });;\r\n    const enlaceUrl = await archivoPath.getDownloadURL();\r\n\r\n\r\n    const archivoPath2 = storageRef.child(`pictures/picture2-${nombreArchivo}.${extension}`);\r\n    await archivoPath2.put(blob2, { contentType: `image/${extension}` });;\r\n    const enlaceUrl2 = await archivoPath.getDownloadURL();\r\n\r\n//console.log(\"POST RESPONSE: \"+JSON.stringify(blob))\r\n\r\n\r\n\r\nconst agregarDatos = async () => {\r\n  try {\r\n    await firebase.db.collection('datos').add({\r\n      nombre: 'Juan',\r\n      edad: 25,\r\n      email: 'juan@example.com',\r\n      foto1: enlaceUrl,\r\n      foto2: enlaceUrl2,\r\n    });\r\n    console.log('Datos agregados correctamente');\r\n  } catch (error) {\r\n    console.error('Error al agregar datos:', error);\r\n  }\r\n};\r\n\r\nagregarDatos();\r\n/*\r\n   try {\r\n    await ref;\r\n   } catch (e) {\r\n    console.log(e)\r\n   }\r\n*/\r\n  setPicture1(null);\r\n  setPicture2(null);\r\n};\r\n\r\n\r\nconst cancelar = ()=>{\r\n  setPicture1(null);\r\n  setPicture2(null);\r\n};\r\n\r\n\r\nreturn (\r\n  <View style={styles.container}>\r\n    <Camera\r\n      style={styles.camera}\r\n      type={Camera.Constants.Type.back}\r\n      ref={ref => setCameraRef(ref)}>\r\n        <View style={styles.rectangle} />\r\n      </Camera>\r\n    <View style={styles.buttonsContainer}>\r\n      <Button title=\"Tomar foto 1\" onPress={takePicture} />\r\n      <Button title=\"Tomar foto 2\" onPress={takePicture} />\r\n      <Button title=\"Guardar\" onPress={savePictures} disabled={!picture1 || !picture2} />\r\n      <Button title=\"x\" onPress={cancelar} disabled={!picture1} />\r\n    </View>\r\n    <View style={styles.previewContainer}>\r\n      {picture1 && <Image source={{ uri: picture1 }} style={styles.preview} />}\r\n      {picture2 && <Image source={{ uri: picture2 }} style={styles.preview} />}\r\n    </View>\r\n  </View>\r\n);\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  camera: {\r\n    flex: 1,\r\n    width: '100%',\r\n  },\r\n  buttonsContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-evenly',\r\n    paddingVertical: 20,\r\n    width: '100%',\r\n  },\r\n  previewContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-evenly',\r\n    paddingVertical: 20,\r\n    width: '100%',\r\n    height: '20%',\r\n  },\r\n  preview: {\r\n    width: 150,\r\n    height: 150,\r\n  },\r\n  rectangle: {\r\n    position: 'absolute',\r\n    top: '5%',\r\n    left: '10%',\r\n    width: 331,\r\n    height: 510,\r\n    borderWidth: 2,\r\n    borderColor: 'white',\r\n    borderRadius: 20,\r\n  },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}